<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="css/blog.css">
    <%- include('share/head_link.ejs') %>

</head>

<body>
    <%- include('share/header.ejs')%>
        <%- include('share/sub_header.ejs')%>
            <div class="lottoBg">
                <div class="lottoOuter">
                    <div class="lottoContainer">
                        <button class="btn btn-vg-secondary	 btn-vg m-2 shadow-sm closeBtn">X</button>
                        <p class="vg-h4 lottop">會員每日可抽獎一次，10點可折抵1元，點數於20天後過期，可於會員專區查看。</p>
                        <div class="spinBtn">點我</div>
                        <div class="wheel">
                            <div class="number" style="--i:1;--clr:#132a13;"><span>0</span></div>
                            <div class="number" style="--i:2;--clr:#90a955;"><span>30</span></div>
                            <div class="number" style="--i:3;--clr:#4f772d;"><span>10</span></div>
                            <div class="number" style="--i:4;--clr:#31572c;"><span>15</span></div>
                            <div class="number" style="--i:5;--clr:#ddea4ad4;"><span>50</span></div>
                        </div>
                    </div>
                </div>
            </div>
            <!-- 主navbar這裡結束 -->

            <div class="vg-section">
                <img src="img/act-moonfruit1.jpg" alt="">
            </div>


            <!-- --內容區 -->
            <div class="container d-flex flex-md-row flex-column-reverse gap-3 mb-4">

                <!-- 左邊文章col -->
                <div class="container d-flex flex-md-row flex-column-reverse gap-3 mb-4">

                    <!-- 左邊文章col -->

                    <div class="border vg-bd-5 actcol p-3 gap-3">
                        <h3 class="vg-h3">
                            <%= data[0].actTitle %>
                        </h3>
                        <div class="text-end"><%- data[0].acttime.toLocaleString() %></div>
                        <img class="img-fluid" src="<%= data[0].actImg %>">
                        <%- data[0].actText %>

                    </div>
                    <!-- 右邊常駐活動 -->
                    <div class="col-md-5 col-lg-3">
                        <div class="d-flex-column text-center border vg-bd-5 p-3 h-100">

                            <button class="btn btn-vg-reg lottoBtn" id="lotto">
                                <h4 class="vg-h4">會員每日抽獎</h4>
                            </button>
                            <svg xmlns="http://www.w3.org/2000/svg" width="90%" viewBox="0 0 64 64">

                                <g id="a" />

                                <g id="b" />

                                <g id="c" />

                                <g id="d" />

                                <g id="e" />

                                <g id="f" />

                                <g id="g" />

                                <g id="h" />

                                <g id="i" />

                                <g id="j" />

                                <g id="k" />

                                <g id="l" />

                                <g id="m" />

                                <g id="n" />

                                <g id="o" />

                                <g id="p" />

                                <g id="q" />

                                <g id="r" />

                                <g id="s">

                                    <polygon fill="#9fa9b6" fill-rule="evenodd"
                                        points="41.31 54.7 41.31 46.62 30.28 44.01 18.31 46.24 18.31 54.7 30.87 58.09 41.31 54.7" />

                                    <path
                                        d="M30.28,44.01l-11.97,2.22v2.96c3.43,2.15,7.49,3.4,11.84,3.4,4.03,0,7.85-1.08,11.16-2.99v-2.98l-11.03-2.61Z"
                                        fill="#8996a8" fill-rule="evenodd" />

                                    <polygon fill="#e4ecf0" fill-rule="evenodd"
                                        points="23.35 54.7 23.35 48.56 29.67 47.2 36.28 48.78 36.28 54.7 29.31 56.57 23.35 54.7" />

                                    <path
                                        d="M29.67,47.2l-6.32,1.36v2.97c2.14,.69,4.43,1.06,6.8,1.06,2.11,0,4.17-.3,6.13-.86v-2.95l-6.61-1.58Z"
                                        fill="#d9e3e9" fill-rule="evenodd" />

                                    <path
                                        d="M16.7,54.7h26.23c1.19,0,2.15,.96,2.15,2.15s-.96,2.15-2.15,2.15H16.7c-1.19,0-2.15-.96-2.15-2.15s.96-2.15,2.15-2.15Z"
                                        fill="#f0f3f5" fill-rule="evenodd" />

                                    <path
                                        d="M39.62,54.7c1.19,0,2.15,.96,2.15,2.15s-.96,2.15-2.15,2.15h3.31c1.19,0,2.15-.96,2.15-2.15s-.96-2.15-2.15-2.15h-3.31Z"
                                        fill="#e4ecf0" fill-rule="evenodd" />

                                    <path
                                        d="M51.79,32.78c-2.5,9.91-11.42,16.85-21.64,16.85-12.33,0-22.32-9.99-22.32-22.32S17.83,5,30.15,5c10.22,0,19.14,6.95,21.64,16.86v10.93Z"
                                        fill="#8996a8" fill-rule="evenodd" />

                                    <path
                                        d="M30.15,5c-.61,0-1.22,.03-1.82,.08,9.41,.8,17.39,7.49,19.73,16.78,.96,4.33,.41,7.58,0,10.93-2.35,9.29-10.33,15.97-19.74,16.77,.6,.05,1.21,.08,1.82,.08,10.22,0,19.14-6.94,21.64-16.85v-10.93c-2.5-9.91-11.42-16.86-21.64-16.86Z"
                                        fill="#7a8594" fill-rule="evenodd" />

                                    <path
                                        d="M41.54,38.7c2.06-2.06,3.52-4.64,4.23-7.46l1.22-3.93-5.48-11.36c-3.01-3.02-7.1-4.73-11.36-4.74l-11.34,4.76c-3.02,3-4.74,7.08-4.76,11.34l4.72,11.38c3.02,3.02,7.11,4.72,11.38,4.72l11.39-4.72Z"
                                        fill="#e8a3c1" fill-rule="evenodd" />

                                    <path d="M30.15,27.32V11.22c-4.26,.02-8.34,1.73-11.34,4.76l11.34,11.34Z"
                                        fill="#f0f3f5" fill-rule="evenodd" />

                                    <path d="M30.15,27.32H14.05c0,4.27,1.7,8.36,4.72,11.38l11.38-11.38Z" fill="#f0f3f5"
                                        fill-rule="evenodd" />

                                    <path d="M30.15,27.32v16.1c4.27,0,8.37-1.7,11.39-4.72l-11.39-11.39Z" fill="#f0f3f5"
                                        fill-rule="evenodd" />

                                    <path d="M46.99,27.32l-1.22-3.93c-.72-2.82-2.19-5.39-4.26-7.43l-11.36,11.36h16.84Z"
                                        fill="#f0f3f5" fill-rule="evenodd" />

                                    <path
                                        d="M51.15,32.82c-4.85,0-9.62-5.5-9.62-5.5,0,0,4.77-5.5,9.62-5.5,3.04,0,5.01,2.46,5.01,5.5s-1.98,5.5-5.01,5.5Z"
                                        fill="#f5e680" fill-rule="evenodd" />

                                    <path
                                        d="M51.15,21.82c-.39,0-.77,.04-1.15,.1,2.45,.49,3.98,2.72,3.98,5.4s-1.54,4.91-3.98,5.4c.38,.06,.77,.1,1.15,.1,3.04,0,5.01-2.46,5.01-5.5s-1.97-5.5-5.01-5.5Z"
                                        fill="#f2d865" fill-rule="evenodd" />

                                    <path
                                        d="M52.55,33.65c2.74-.63,4.62-3.09,4.62-6.34s-1.88-5.71-4.62-6.34c-2.84-10.02-11.92-16.98-22.39-16.98C17.29,4,6.83,14.46,6.83,27.32c0,8.12,4.17,15.27,10.48,19.45v6.94h-.62c-1.74,0-3.15,1.41-3.15,3.15s1.41,3.15,3.15,3.15h26.23c1.74,0,3.15-1.41,3.15-3.15s-1.41-3.15-3.15-3.15h-.62v-6.56c4.87-2.99,8.6-7.71,10.23-13.49Zm2.62-6.34c0,2.65-1.65,4.5-4.01,4.5-3.38,0-6.86-3.12-8.24-4.5,1.38-1.39,4.85-4.5,8.24-4.5,2.36,0,4.01,1.85,4.01,4.5Zm-34.91,11.31l8.9-8.9v12.59c-3.4-.23-6.48-1.57-8.9-3.69Zm-5.1-10.31h12.59l-8.9,8.9c-2.12-2.42-3.46-5.5-3.69-8.9Zm24.93-12.34l-8.93,8.93V12.3c3.4,.22,6.5,1.54,8.93,3.67Zm4.57,7.28c-1.69,1.18-2.99,2.46-3.56,3.06h-8.53l8.95-8.95c1.45,1.66,2.52,3.66,3.14,5.89Zm-15.5,1.65l-8.9-8.9c2.42-2.12,5.5-3.46,8.9-3.69v12.59Zm-10.31-7.49l8.9,8.9H15.15c.23-3.4,1.57-6.48,3.69-8.9Zm12.31,12.31l8.93,8.93c-2.43,2.13-5.54,3.45-8.93,3.67v-12.6Zm10.36,7.53l-8.95-8.95h8.53c.57,.6,1.87,1.88,3.56,3.06-.62,2.23-1.7,4.23-3.14,5.89ZM8.83,27.32c0-11.75,9.56-21.32,21.32-21.32,9.35,0,17.47,6.09,20.26,14.91-1.41,.14-2.76,.62-4.01,1.28-2.29-7.29-8.95-11.98-16.25-11.98-9.43,0-17.1,7.67-17.1,17.1s7.68,17.1,17.1,17.1c7.33,0,13.98-4.74,16.25-11.98,1.24,.67,2.6,1.15,4.01,1.28-2.79,8.82-10.91,14.91-20.26,14.91-11.76,0-21.32-9.56-21.32-21.32Zm15.52,26.38v-3.83c1.86,.48,3.8,.76,5.8,.76,1.76,0,3.46-.26,5.13-.64v3.7h-10.93Zm-5.03-5.75c.97,.51,1.99,.94,3.03,1.32v4.44h-3.03v-5.75Zm24.76,8.9c0,.63-.52,1.15-1.15,1.15H16.7c-.63,0-1.15-.52-1.15-1.15s.52-1.15,1.15-1.15h26.23c.63,0,1.15,.52,1.15,1.15Zm-3.77-3.15h-3.03v-4.22c1.05-.34,2.05-.76,3.03-1.24v5.46Z" />

                                    <path
                                        d="M49.92,27.32c0,.64,.52,1.15,1.15,1.15s1.15-.52,1.15-1.15-.52-1.15-1.15-1.15-1.15,.52-1.15,1.15Z" />

                                    <path
                                        d="M30.15,9.3c.64,0,1.15-.52,1.15-1.15s-.52-1.16-1.15-1.16-1.15,.52-1.15,1.16,.52,1.15,1.15,1.15Z" />

                                    <path
                                        d="M31.31,46.57c0-.64-.52-1.16-1.15-1.16s-1.15,.52-1.15,1.16,.52,1.15,1.15,1.15,1.15-.52,1.15-1.15Z" />

                                    <path
                                        d="M12.1,27.36c0-.64-.52-1.15-1.16-1.15s-1.15,.52-1.15,1.15,.52,1.15,1.15,1.15,1.16-.52,1.16-1.15Z" />

                                    <path
                                        d="M40.76,11.3c.32-.55,.13-1.26-.42-1.58-.55-.32-1.26-.13-1.58,.42-.32,.55-.13,1.26,.42,1.58,.55,.32,1.26,.13,1.58-.42Z" />

                                    <path
                                        d="M19.55,43.42c-.32,.55-.13,1.26,.42,1.58,.55,.32,1.26,.13,1.58-.42,.32-.55,.13-1.26-.42-1.58-.55-.32-1.26-.13-1.58,.42Z" />

                                    <path
                                        d="M47.79,37.54c.32-.55,.13-1.26-.42-1.58-.55-.32-1.26-.13-1.58,.42-.32,.55-.13,1.26,.42,1.58,.55,.32,1.26,.13,1.58-.42Z" />

                                    <path
                                        d="M14.52,18.33c.32-.55,.13-1.26-.42-1.58-.55-.32-1.26-.13-1.58,.42-.32,.55-.13,1.26,.42,1.58,.55,.32,1.26,.13,1.58-.42Z" />

                                    <path
                                        d="M34.83,9.92c.62,.16,1.25-.2,1.41-.82,.16-.62-.2-1.25-.82-1.41-.62-.16-1.25,.2-1.41,.82-.17,.62,.2,1.25,.82,1.41Z" />

                                    <path
                                        d="M25.48,44.8c-.62-.16-1.25,.2-1.41,.82-.16,.61,.2,1.25,.82,1.41,.62,.16,1.25-.2,1.41-.82,.17-.62-.2-1.25-.82-1.41Z" />

                                    <path
                                        d="M11.3,23.5c.62,.16,1.25-.2,1.41-.82,.17-.62-.2-1.25-.82-1.41-.62-.16-1.25,.2-1.41,.82-.17,.62,.2,1.25,.82,1.41Z" />

                                    <path
                                        d="M44.55,14.59c.45-.45,.45-1.18,0-1.63s-1.18-.45-1.63,0c-.45,.45-.45,1.18,0,1.63,.45,.45,1.18,.45,1.63,0Z" />

                                    <path
                                        d="M15.75,40.13c-.45,.45-.45,1.18,0,1.63,.45,.45,1.18,.45,1.63,0,.45-.45,.45-1.18,0-1.63-.45-.45-1.18-.45-1.63,0Z" />

                                    <path
                                        d="M44.55,41.76c.45-.45,.45-1.18,0-1.63-.45-.45-1.18-.45-1.63,0-.45,.45-.45,1.18,0,1.63,.45,.45,1.18,.45,1.63,0Z" />

                                    <path
                                        d="M17.38,14.59c.45-.45,.45-1.18,0-1.63-.45-.45-1.18-.45-1.63,0s-.45,1.18,0,1.63,1.18,.45,1.63,0Z" />

                                    <path
                                        d="M47.37,18.75c.55-.32,.74-1.02,.42-1.58-.32-.55-1.02-.74-1.58-.42-.55,.32-.74,1.03-.42,1.58,.32,.55,1.03,.74,1.58,.42Z" />

                                    <path
                                        d="M12.94,35.96c-.55,.32-.74,1.03-.42,1.58,.32,.55,1.02,.74,1.58,.42,.55-.32,.74-1.02,.42-1.58-.32-.55-1.03-.74-1.58-.42Z" />

                                    <path
                                        d="M40.33,45c.55-.32,.74-1.02,.42-1.58-.32-.55-1.03-.74-1.58-.42-.55,.32-.74,1.03-.42,1.58,.32,.55,1.02,.74,1.58,.42Z" />

                                    <path
                                        d="M21.12,11.72c.55-.32,.74-1.02,.42-1.58-.32-.55-1.02-.74-1.58-.42-.55,.32-.74,1.03-.42,1.58,.32,.55,1.03,.74,1.58,.42Z" />

                                    <path
                                        d="M12.71,32.03c-.16-.62-.8-.98-1.41-.82-.62,.16-.98,.8-.82,1.41,.16,.62,.8,.98,1.41,.82,.62-.16,.98-.8,.82-1.41Z" />

                                    <path
                                        d="M35.42,47.03c.62-.17,.98-.8,.82-1.41-.16-.62-.8-.98-1.41-.82-.62,.16-.98,.8-.82,1.41,.16,.62,.8,.98,1.41,.82Z" />

                                    <path
                                        d="M25.48,9.92c.62-.17,.98-.8,.82-1.41-.16-.62-.8-.98-1.41-.82-.62,.16-.98,.8-.82,1.41,.16,.62,.8,.98,1.41,.82Z" />

                                </g>

                                <g id="t" />

                                <g id="u" />

                                <g id="v" />

                                <g id="w" />

                                <g id="x" />

                                <g id="y" />

                                <g id="a`" />

                                <g id="aa" />

                                <g id="ab" />

                                <g id="ac" />

                                <g id="ad" />

                                <g id="ae" />

                                <g id="af" />

                                <g id="ag" />

                                <g id="ah" />

                                <g id="ai" />

                                <g id="aj" />

                                <g id="ak" />

                                <g id="al" />

                                <g id="am" />

                                <g id="an" />

                                <g id="ao" />

                                <g id="ap" />

                                <g id="aq" />

                                <g id="ar" />

                                <g id="as" />

                                <g id="at" />

                                <g id="au" />

                                <g id="av" />

                                <g id="aw" />

                                <g id="ax" />

                            </svg>
                            <h4 class="vg-h4 pt-5">本月主打</h4>
                            <img class="img-fluid" src="./img/act-moonfruit11.png" alt="">
                        </div>

                    </div>
                </div>
            </div>
            <%- include('share/footer.ejs')%>
                <script src="js/blogact.js"></script>
                <script src="js/selectivity-jquery.min.js"></script>

                <script>
                    //輪盤設置
                    // 假設您已經有了輪盤的初始角度和旋轉速度
                    let initialAngle = 0; // 輪盤的初始角度
                    let rotationSpeed = 3; // 旋轉速度，設置為3秒
                    let minRevolutions = 5; // 最少旋轉五圈
                    let spanValue;
                    // 獲取spin按鈕
                    let spinBtn = document.querySelector('.spinBtn');

                    spinBtn.onclick = function () {

                        // 計算所需的旋轉角度增量
                        let minAngle = 360 * minRevolutions;
                        let angleIncrement = Math.ceil(Math.random() * minAngle + minAngle);

                        // 更新旋轉角度
                        initialAngle += angleIncrement;

                        // 將旋轉角度轉換為0到360度的範圍
                        let normalizedAngle = (initialAngle % 360 + 360) % 360;

                        // 計算對應的number div的索引
                        let numberOfDivs = 5; // 假設有5個number div
                        let divIndex = Math.floor((normalizedAngle / 360) * numberOfDivs);

                        // 獲取所有number divs
                        let numberDivs = document.querySelectorAll('.lottoContainer .wheel .number');

                        // 獲取對應的number div
                        let targetNumberDiv = numberDivs[divIndex];

                        // 獲取對應的span值
                        spanValue = targetNumberDiv.querySelector('span').textContent;

                        // 更新輪盤的旋轉角度
                        let wheel = document.querySelector('.wheel');
                        wheel.style.transition = `transform ${rotationSpeed}s ease-in-out`;
                        wheel.style.transform = `rotate(${360 - initialAngle}deg)`; // 反向旋轉到對應的數字

                        // // 打印span值
                        // console.log('對應的span值：', spanValue);

                        setTimeout(() => {
                            Swal.fire({ text: `您已獲得${spanValue}點`, confirmButtonColor: '#a1c181' }).then(function (result) {
                                if (result.value) {
                                    lottoBg.style.display = 'none';
                                }
                            })
                        }, 3700)

                        var userData = localStorage.getItem("token");
                        var userToken = userData ? JSON.parse(userData) : false;
                        var valueData = {};
                        valueData.spanValue = spanValue;
                        valueData.uid = userToken.id;
                        var jsonData = JSON.stringify(valueData);
                        console.log(jsonData);
                        fetch('/activityboard/spanValue', {
                            method: "POST",
                            headers: {
                                "Content-type": "application/json;charset=UTF-8"
                            },
                            body: jsonData
                        })
                            .then(function (res) {
                                console.log(res);
                            })

                    }
                    //導覽列設置

                    $('#qna').addClass('btn-vg-2-active');
                    $('#title1').text('全部分類');
                    $('#title1').prop('href', '/activityboard');
                    $('#title2').text('限時活動');
                    $('#title2').prop('href', '/activityboard/category/1');
                    $('#title3').text('佈告欄');
                    $('#title3').prop('href', '/activityboard/category/2');
                    $('#title4').css('display', 'none');
                    $('#title5').css('display', 'none');

                    $(function () {
                        $(`#qa1`).on({
                            mouseover: function () {
                                // console.log(this);
                                $(`#title1`).addClass('btn-vg-3-active');
                            },
                            mouseout: function () {
                                $(`#title1`).removeClass('btn-vg-3-active');
                            }
                        });
                        $(`#qa2`).on({
                            mouseover: function () {
                                // console.log(this);
                                $(`#title2`).addClass('btn-vg-3-active');
                            },
                            mouseout: function () {
                                $(`#title2`).removeClass('btn-vg-3-active');
                            }
                        });
                        $(`#qa3`).on({

                            mouseover: function () {
                                // console.log(this);
                                $(`#title3`).addClass('btn-vg-3-active');
                            },
                            mouseout: function () {
                                $(`#title3`).removeClass('btn-vg-3-active');
                            }
                        });

                    })
                </script>

</body>

</html>